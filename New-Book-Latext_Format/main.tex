%-------------------------------------------------------------------------------------------------------
%
%
%
%-------------------------------------------------------------------------------------------------------
\documentclass[a4paper, 11pt]{book}  

%-------------------------------------------------------------------------------------------------------
% Packages
%
%-------------------------------------------------------------------------------------------------------
\usepackage{amsmath}           
\usepackage{hyperref}           
\usepackage{geometry}           
\usepackage{fancyhdr}           
\usepackage{titlesec}
\usepackage{titlepic}
\usepackage{booktabs}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{tcolorbox}
\usepackage{graphicx}           
\usepackage{pdfpages}
\usepackage{float}
\usepackage{placeins}
\usepackage{tikz}
\usepackage{relsize}
\usepackage{pdflscape}
\usepackage{longtable}
\usepackage{array}
\usepackage[all]{nowidow}
\usepackage{etoolbox}
\usetikzlibrary{shapes,shadows,arrows,calc,intersections}

%-------------------------------------------------------------------------------------------------------
% Directory paths used for included files
%
%-------------------------------------------------------------------------------------------------------
\newcommand{\srcinputpath}{../../LcsNodes-Pico/}

%-------------------------------------------------------------------------------------------------------
% Chapter title settings 
%
%-------------------------------------------------------------------------------------------------------
\titleformat{\chapter}[hang]{\normalfont\huge\bfseries}{\thechapter}{2pc}{}
\titlespacing*{\chapter}{0pt}{0.1in}{0.2in}

%-------------------------------------------------------------------------------------------------------
% Page layout settings
%
%-------------------------------------------------------------------------------------------------------
\geometry{a4paper, margin=1in, top=1in, bottom=1in, left=1in, right=1in, headheight=0.5in}
\addtolength{\parskip}{1.0ex}

%-------------------------------------------------------------------------------------------------------
% Page numbering settings
%
%-------------------------------------------------------------------------------------------------------
\pagestyle{fancy}               
\fancyhf{}                     
\fancyhead[L]{\leftmark}       
\fancyfoot[R]{\thepage}         
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}

%-------------------------------------------------------------------------------------------------------
% Listing style for showing source code files. The appendix will optional include the source files 
% of the layout control system components.
%
%-------------------------------------------------------------------------------------------------------
\lstdefinestyle{listingstyle}{ 
    backgroundcolor=\color{gray!10}, 
    basicstyle={\ttfamily\tiny}, 
    keywordstyle=\color{magenta},
    identifierstyle=\ttfamily\color{blue},
    numberstyle={\ttfamily\tiny\color{gray}},
    commentstyle=\ttfamily\color{teal},
    showstringspaces=false,
    numbers=left,
    frame=single,
    texcl=false,
    alsoletter={\#},
    morekeywords={\#include, \#define, \#ifdef, \#endif, \#pragma}
} 

%-------------------------------------------------------------------------------------------------------
% Listing style for showing code snippets. This style is used for showing short code sequences.
%
%-------------------------------------------------------------------------------------------------------
\lstdefinestyle{codesnippetstyle}{ 
    backgroundcolor=\color{gray!10}, 
    basicstyle={\ttfamily\relsize{-1}}, 
    keywordstyle=\color{magenta},
    identifierstyle={\ttfamily\color{blue}}, 
    numberstyle={\ttfamily\relsize{-1}\color{gray}}, 
    commentstyle={\ttfamily\color{teal}}, 
    showstringspaces=false,
    numbers=left,
    frame=single,
    texcl=false,
    alsoletter={\#},
    morekeywords={\#include, \#define, \#ifdef, \#endif, \#pragma}
}

%-------------------------------------------------------------------------------------------------------
% Document start.
%
%-------------------------------------------------------------------------------------------------------
\begin{document}

    %---------------------------------------------------------------------------------------------------
    % Toggles.
    %
    %---------------------------------------------------------------------------------------------------
    \newtoggle{includeListings}
    \togglefalse{includeListings} 

    %---------------------------------------------------------------------------------------------------
    %
    %
    %---------------------------------------------------------------------------------------------------
    \setlength{\emergencystretch}{3em}
    \raggedbottom

    %---------------------------------------------------------------------------------------------------
    % Common TIKZ styles for my pictures.
    %
    %---------------------------------------------------------------------------------------------------
    \tikzstyle{tsLargeBold} = [text=black, font=\bfseries\large]
    \tikzstyle{tsWraptext} = [tsLargeBold, text centered, align=left]

    \tikzstyle{tsRectangle} = [  rectangle,
                                        tsWraptext,               
                                        draw=black,
                                        line width=1mm]

    \tikzstyle{tsRoundedRectangle} = [  tsRectangle,
                                        rounded corners]

    \tikzstyle{tsEllipse} = [   ellipse,
                                tsWraptext,
                                draw=black,
                                line width=1mm]

    %---------------------------------------------------------------------------------------------------
    % Title page.
    %
    %---------------------------------------------------------------------------------------------------
    \begin{center}
        \includegraphics[width=0.7\textwidth]{./figures/Frontpage-Picture.png}
        \vspace{ 2cm }
       
        {\Huge \textbf{A Layout Control System for \\ Model Railroads}} 
        \vspace{ 2cm }
       
        {\Large Helmut Fieres}

        {\large \today}
    \end{center}

    %---------------------------------------------------------------------------------------------------
    % Book body.
    %
    %---------------------------------------------------------------------------------------------------
    \frontmatter            
    \tableofcontents    

    \mainmatter             
    \include{chapters/Introduction}
    \include{chapters/LCS-Concepts-General}
    %\include{chapters/LCS-Concepts-Message-Formats}
    %\include{chapters/LCS-Concepts-Message-Protocols}

    \include{chapters/LCS-Runtime-Lib-Introduction}
    %\include{chapters/LCS-Runtime-Lib-Storage}
    %\include{chapters/LCS-Runtime-Lib-API}
    %\include{chapters/LCS-Runtime-Lib-Callbacks}
    %\include{chapters/LCS-Runtime-Lib-Example}
    
    \include{chapters/LCS-Concepts-DCC-Subsystem}
    \include{chapters/LCS-Concepts-Analog-Subsystem}
    \include{chapters/LCS-Concepts-Hardware-Module-Design}
    %\include{chapters/LCS-Controller-Dependent-Code}

    % \include{chapters/Lcs Nodes firmware design
    % \include{chapters/LCS-Power-Module-Design}
    % \include{chapters/LCS-Railcom-Signal-Detector}

    % \include{chapters/LCS-Base_station-Intro}
    % \include{chapters/LCS-Base_station-Hardware}
    % \include{chapters/LCS-Base_station-Firmware}

    % \include{chapters/LCS-Cab-Handheld-Intro}
    % \include{chapters/LCS-Cab-Handheld-Firmware-Development}
    % \include{chapters/LCS-Cab-Handheld-Basic}
    % \include{chapters/LCS-Cab-Handheld-Firmware}
    % \include{chapters/LCS-Cab-Handheld-Diesel}

    % \include{chapters/LCS-Concepts-Signaling-Block-Control}

    % \include{chapters/LCS-Block-Controller-Boards}
    % \include{chapters/LCS-Block-Controller-Hardware}
    % \include{chapters/LCS-Block-Controller-Firmware}
    
    % \include{chapters/LCS-Concepts-Sensors-And-Actors}
    % \include{chapters/LCS_Concepts-Hardware-Extension-Module-Design}

    % \include{chapters/LCS-Extension-Track-Occupancy-Detector}
    % \include{chapters/LCS-Extension-Servo}
    % \include{chapters/LCS-Extension-GPIO}
    % \include{chapters/LCS-Extension-Signal}
    % \include{chapters/LCS-Extension-Turnout}
    % \include{chapters/LCS-Extension-Relay}
    % \include{chapters/LCS-Extension-Combo-Board}
    % \include{chapters/LCS-Extension-Cab-Control}
    % \include{chapters/LCS-Extension-Prototype}

    % \include{chapters/LCS-Layout-Connector}
    % \include{chapters/LCS-Gateway-Module)
    % \include{chapters/LCS-DCC-Monitoring}
    % \include{chapters/LCS-Layout-System-Configuration}
    % \include{chapters/LCS-Guidance-Computer)
    % \include{chapters/LCS-Utility-Boards)
    % \include{chapters/LCS-UI_Elements)
    % \include{chapters/LCS-Outlook}

    \appendix 

    % \include{appendices/LCS-Item-Reference}
    % \include{appendices/LCS-Command-Reference}
    % \include{appendices/DCC-PP-Command-Reference}
    % \include{appendices/LCS-Runtime-Lib-Reference}
    % \include{appendices/LCS-CDC-Lib-Reference}
    \include{appendices/LCS-Nodes-And-EasyEDA}
    % \include{appendices/Generic-Power-Supply}
    % \include{appendices/Inspiring-Work-And-Links} 
    % \include{appendices/About-This-Book}

    \iftoggle{includeListings}{ \include{appendices/listings} }
    
    % \include{appendices/Notes}

    \include{appendices/tests}
    \backmatter             

\end{document}
